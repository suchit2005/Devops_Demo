# Qlik Sense Version Control Cli - **Pre-Pre-Release-Pre-Alpha - Feedback Appreciated**

## Points of Contact

* Michael Rutter - <michael.rutter@accenture.com>
* Sashin Patel - <sashin.patel@accenture.com>

## Introduction

**Qlik Sense Version Control Cli** is a nodejs command line tool for enabling
the serialisation and de-serialisation of Qlik Sense Apps on the Desktop or the 
Server. **It currently only supports Qlik Sense Desktop**, but Server support is
coming soon. 

Based on [enigma.js][enigma], [buildapp](buildapp), and 
[serializeapp][serializeapp] it enables Qlik developers to version
control Qlik Sense Apps including load scripts, sheet objects, and data connections
like any other asset. This enables deployment from git repos, possibly as part 
of a larger automation scheme; rollbacks to pervious versions; and most importantly 
enables distrubted workflows (git) for Qlik Sense developers (commits, merges,
push, pull).

### Supported Versions
The tool currently supports version 3.2 and June 2017. In future we look to
support all versions supported by [enigma.js][enigma].

## Serialised Output

![](./output.png)

## Installation

The tool is a private npm module existing on the VIA practice project repo. 
To install you can use either the `npm` or `yarn` package
managers. If you don't have access speak to a VIA practice manager about 
being added to the distrubtion list (if you are reading this you probably 
have access already).

### yarn
```sh
yarn add ssh://git@innersource.accenture.com/va/qs-version-control.git
```

### npm
```sh
npm install --save-dev ssh://git@innersource.accenture.com/va/qs-version-control.git
```

## Commands

```
Commands:
  to-json  serialise from qvf to JSON
  to-qvf   deserialise from JSON to qvf

Options:
  --help             Show help                                    [boolean]
  --config-path, -c  Config file path                            [required]
```

### examples 

#### serialisation from a qlik sense app 
```sh
qs-version-control to-json -c ./qs.config.json
```

#### deserialisation from plain text to qlik sense app
```sh
qs-version-control to-qvf -c ./qs.config.json
```



## Configuration for Sense Desktop

### Config File

For the tool to work you need to pass it a JSON configuration file that
has these fields: 
```js
{
  // file name of the qlik sense app on Desktop
  "sourceQVF": "App.qvf", 
  // relative path to local directory for storing the qlik sense app
  "targetDir": "./qsapp" 
}

```

### Example single App npm scripts

#### package.json:
```json
{
  "name": "test",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "qs:local:save": "qs-version-control to-json -c ./qs.config.json",
    "qs:local:write": "qs-version-control to-qvf -c ./qs.config.json" 
  },
  "keywords": [],
  "author": "",
  "license": "ISC"
}
``` 

#### yarn usage
```sh
# serialise 
yarn qs:local:save 
# deserialise
yarn qs:local:write
```

#### npm usage
```sh
# serialise 
npm run qs:local:save
# deserialise
npm run qs:local:write
```

[enigma]:https://github.com/qlik-oss/enigma.js
[buildapp]:https://github.com/mindspank/buildapp
[serializeapp]:https://github.com/mindspank/serializeapp