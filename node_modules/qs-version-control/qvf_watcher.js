const fs = require('fs')
const path = require('path')
const serialize = require('./serialize')
var config = JSON.parse(fs.readFileSync('config_aip_dev.json'), 'utf-8')

try {
  fs.watch(
    path.resolve(config.qsAppsLocalDir, config.sourceQVF + '.qvf'),
    null,
    handleChange
  )
} catch (err) {
  console.log(err)
}

function handleChange(eventType, filename) {
  console.log(eventType + ' happened on ' + filename)
  serialize(config)
}
